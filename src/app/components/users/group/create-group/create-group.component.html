<ng-container #content>
  <div class="modal-header">
    <h4 class="modal-title" id="modal-basic-title">{{ modalTitle }}</h4>
    <button
      type="button"
      class="btn-close"
      aria-label="Close"
      (click)="activeModal.dismiss()"
    ></button>
  </div>
  <div class="modal-body">
    <form class="form theme-form" [formGroup]="formGroup">
      <div class="card-body">
        <div class="row mb-3">
          <div class="col-sm-12 d-flex gap-4">
            <div class="col">
              <label for="status">Group name:</label>
              <input
                class="form-control"
                id="name"
                type="text"
                formControlName="name"
                placeholder="Please enter group name"
              />
            </div>
            <div class="col-sm-2">
              <label class="col-form-label m-r-10"> Active: </label>
              <div class="media-body">
                <label class="switch">
                  <input
                    type="checkbox"
                    [checked]="formGroup.get('status')?.value"
                    (change)="activeGroup($event)"
                  />
                  <span class="switch-state"></span>
                </label>
              </div>
            </div>
          </div>
        </div>
        <div class="row mb-3">
          <div class="col-sm-12 d-flex gap-4">
            <div class="col">
              <label for="status">Description:</label>
              <textarea
                class="form-control"
                id="description"
                type="text"
                formControlName="description"
                placeholder="Please enter description"
              ></textarea>
            </div>
          </div>
        </div>
        <div class="row mb-3">
          <div class="col-sm-12 d-flex gap-4">
            <div class="col">
              <label for="status">Invite users to join group:</label>
              <input
                class="form-control"
                id="search"
                type="text"
                formControlName="searchQuery"
                [placeholder]="
                  'Search ' + getTotalEmployees() + ' company users'
                "
              />
            </div>
          </div>
        </div>
        <div class="col">
          <ul
            class="list-group list-group-flush"
            style="max-height: 450px; overflow-y: auto; height: 450px"
          >
            <li
              class="list-group-item d-flex align-items-center"
              *ngFor="let employee of displayedEmployees"
            >
              <div
                class="col-sm-2 d-flex justify-item-center justify-content-center"
              >
                <img
                  src="https://pub-c5e31b5cdafb419fb247a8ac2e78df7a.r2.dev/mock/assets/images/avatar/avatar-25.webp"
                  alt=""
                  style="width: 58px; height: 58px; border-radius: 100%"
                />
              </div>
              <div class="col" style="color: black; margin-left: 12px">
                <span class="row" style="font-size: 18px; font-weight: 500">
                  {{ employee.name }}</span
                >
                <span class="row" style="font-style: italic">{{
                  employee.email
                }}</span>
              </div>
              <div class="col-sm-1">
                @if(activeUserGroup[employee.id]) {
                <button
                  type="button"
                  placement="top"
                  class="btn btn-danger m-r-10 d-flex align-items-center justify-content-center"
                  style="padding: 0.375rem; border-radius: 100%"
                  (click)="addUserToGroup(employee)"
                >
                  <i class="icofont icofont-minus" style="margin: 0"></i>
                </button>
                } @if(!activeUserGroup[employee.id]){
                <button
                  type="button"
                  placement="top"
                  class="btn btn-outline-primary m-r-10 d-flex align-items-center justify-content-center"
                  style="padding: 0.375rem; border-radius: 100%"
                  (click)="addUserToGroup(employee)"
                >
                  <i class="icofont icofont-ui-add" style="margin: 0"></i>
                </button>
                }
              </div>
            </li>
          </ul>
        </div>
      </div>
    </form>
  </div>
  <div class="modal-footer">
    <button type="button" class="btn btn-light" (click)="activeModal.dismiss()">
      Cancel
    </button>
    <button type="button" class="btn btn-primary" (click)="create()">
      Save
    </button>
  </div>
</ng-container>
